<!--pages/home/index.wxml-->
<view class="home" >
    <loading isShow="{{(!infoLoad&&!prizeLoad)?'none':'block'}}"></loading>
    <view style="display:{{(!infoLoad&&!prizeLoad)?'block':'none'}} ;">
    <scroll-view scroll-y="{{true}}" style="height: 100vh;"  bindscroll="listenPageScroll" bindscrolltolower="listenPageBottom" lower-threshold="1">
        
    <view class="modal" wx:if="{{ruleMask}}">
          <view class="box">
            <image bindtap="setRuleMask" src="../../images/icon-close.png" mode="" />
            <view class="title">
                活动规则
            </view>
            <view class="content">
                <scroll-view scroll-y="true" style="height: 100%;" enhanced="{{enhanced}}" show-scrollbar="{{scrollbar}}">
                    <view class="list">
                        <view class="text">
                            1，这是活动规则1
                        </view>
                        <view class="text">
                            1，这是活动规则2
                        </view>
                        <view class="text">
                            1，这是活动规则3
                        </view>
                    </view>
                </scroll-view>
            </view>
        </view>
    </view>
    <view class="header">
        <view class="head-content wrap flex-between">
            <view wx:if="{{loginStatus}}" class="mine">
                <view class="">
                    我的积分
                </view>
                <view class="num mt-20" bindtap="navgator" data-path="integralRecords/index" data-power='{{true}}'>
                    <text>{{userInfo.integral||0}}</text>
                    <image src="../../images/icon-entry_white.png" mode="" />
                </view>
            </view>
            <view class="login-tip" wx:else bindtap="login">
                <view class="align-center">
                    <text>未登录</text>
                    <image src="../../images/icon-entry_white.png" mode="" />
                </view>
            </view>
            <view class="rule">
                <view class="" bindtap="setRuleMask">
                    活动规则
                </view>
                <view class="flex-center" bindtap="navgator" data-path="exchangeRecord/index" data-power="{{true}}">
                    <image src="../../images/icon-record_white.png" mode="" />
                    <text class="ml-5">兑换记录</text>
                </view>
            </view>
        </view>
    </view>
    <view class="body">
        <!-- <view class="wrap"> -->
        <view class="wrap shop-title">
            积分兑换
        </view>
        <tab scrollMove="scrollMove" tipLoad="{{tipLoad}}" bind:myevent="tabChange" isPullLoading="{{true}}" loading="{{loading}}" loaded="{{loaded}}" bind:scroll="scroll" id="tab" titleList="{{['全部商品','热门兑换','特惠专享','爆款商品']}}" scroll="{{scroll}}">
            <view class="wrap content" slot='全部商品' style="">
                <view wx:if="{{prizeList.length}}">
                    <view class="shops ptb-20">
                        <view class="item" bindtap="navgator" data-path="goodDetail/index" wx:for="{{prizeList}}" wx:key="index" data-id="{{item._id}}">
                            <image onload="imgLoad" src="{{item.imageUrl}}" mode="" />
                            <view class="title mt-10">
                                {{item.prizeName}}
                            </view>
                            <view class="content mt-10">
                                <view class="info">
                                    <view class="price">
                                        {{item.price}}积分
                                    </view>
                                    <view class="num">
                                        限量{{item.limitNum}}
                                    </view>
                                </view>
                                <view wx:if="{{item.remainderNum}}" class="btn mt-20">
                                    去兑换
                                </view>
                                <view wx:else class="btn-no mt-20">
                                    已兑完
                                </view>
                            </view>
                        </view>
                    </view>
                    <view class="bomTxt">
                        <view class="bottom-tip" style="display: {{tipLoad1?'block':'none'}};">上拉加载</view>
                        <view class="bottom-tip" style="display: {{loading1?'block':'none'}};">正在加载...</view>
                        <view class="bottom-tip" style="display: {{loaded1?'block':'none'}};">已加载全部</view>
                    </view>
                </view>
                <view wx:else class="void-tip">
                    暂无奖品，正在全力补货中...
                </view>
            </view>
            <view class="wrap" slot="热门兑换" style="">
                <view wx:if="{{hotPrizeList.length}}">
                    <view class="shops ptb-20">
                        <view class="item" bindtap="navgator" wx:for="{{hotPrizeList}}" wx:key="index" data-path="goodDetail/index" data-id="{{item._id}}">
                            <image src="{{item.imageUrl}}" mode="" />
                            <view class="title mt-10">
                                {{item.prizeName}}
                            </view>
                            <view class="content mt-10">
                                <view class="info">
                                    <view class="price">
                                        {{item.price}}积分
                                    </view>
                                    <view class="num">
                                        限量{{item.limitNum}}
                                    </view>
                                </view>
                                <view wx:if="{{item.remainderNum}}" class="btn mt-20">
                                    去兑换
                                </view>
                                <view wx:else class="btn-no mt-20">
                                    已兑完
                                </view>
                            </view>
                        </view>
                    </view>
                    <view class="bomTxt">
                        <view class="bottom-tip" style="display: {{tipLoad2?'block':'none'}};">上拉加载</view>
                        <view class="bottom-tip" style="display: {{loading2?'block':'none'}};">正在加载...</view>
                        <view class="bottom-tip" style="display: {{loaded2?'block':'none'}};">已加载全部</view>
                    </view>
                </view>
                <view wx:else class="void-tip">
                    暂无奖品，正在全力补货中...
                </view>
            </view>
            <view class="wrap" slot="特惠专享" style="">
                <view wx:if="{{disPrizeList.length}}">
                    <view class="shops ptb-20">
                        <view class="item" bindtap="navgator" wx:for="{{disPrizeList}}" wx:key="index" data-path="goodDetail/index" data-id="{{item._id}}">
                            <image src="{{item.imageUrl}}" mode="" />
                            <view class="title mt-10">
                                {{item.prizeName}}
                            </view>
                            <view class="content mt-10">
                                <view class="info">
                                    <view class="price">
                                        {{item.price}}积分
                                    </view>
                                    <view class="num">
                                        限量{{item.limitNum}}
                                    </view>
                                </view>
                                <view wx:if="{{item.remainderNum}}" class="btn mt-20">
                                    去兑换
                                </view>
                                <view wx:else class="btn-no mt-20">
                                    已兑完
                                </view>
                            </view>
                        </view>
                    </view>
                    <view class="bomTxt">
                        <view class="bottom-tip" style="display: {{tipLoad3?'block':'none'}};">上拉加载</view>
                        <view class="bottom-tip" style="display: {{loading3?'block':'none'}};">正在加载...</view>
                        <view class="bottom-tip" style="display: {{loaded3?'block':'none'}};">已加载全部</view>
                    </view>
                </view>
                <view wx:else class="void-tip">
                    暂无奖品，正在全力补货中...
                </view>
            </view>
            <view class="wrap" slot="爆款商品" style="">
                <view wx:if="{{burstPrizeList.length}}">
                    <view class="shops ptb-20">
                        <view class="item" bindtap="navgator" wx:for="{{burstPrizeList}}" wx:key="index" data-path="goodDetail/index" data-id="{{item._id}}">
                            <image src="{{item.imageUrl}}" mode="" />
                            <view class="title mt-10">
                                {{item.prizeName}}
                            </view>
                            <view class="content mt-10">
                                <view class="info">
                                    <view class="price">
                                        {{item.price}}积分
                                    </view>
                                    <view class="num">
                                        限量{{item.limitNum}}
                                    </view>
                                </view>
                                <view wx:if="{{item.remainderNum}}" class="btn mt-20">
                                    去兑换
                                </view>
                                <view wx:else class="btn-no mt-20">
                                    已兑完
                                </view>
                            </view>
                        </view>
                    </view>
                    <view class="bomTxt">
                        <view class="bottom-tip" style="display: {{tipLoad4?'block':'none'}};">上拉加载</view>
                        <view class="bottom-tip" style="display: {{loading4?'block':'none'}};">正在加载...</view>
                        <view class="bottom-tip" style="display: {{loaded4?'block':'none'}};">已加载全部</view>
                    </view>
                </view>
                <view wx:else class="void-tip">
                    暂无奖品，正在全力补货中...
                </view>
            </view>
        </tab>
    </view>
    </scroll-view>
    </view>
</view>